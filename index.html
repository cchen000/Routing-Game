<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>网格路由小游戏 | Grid Routing Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- ==================== 游戏状态面板 | Game Status Panel ==================== -->
        <div class="status-panel">
            <p>游戏难度 | Difficulty:</p>
            <select id="difficulty-select" class="difficulty-select">
                <option value="easy">简易模式 | Easy</option>
                <option value="medium">中等模式 | Medium</option>
                <option value="hard">困难模式 | Hard</option>
                <option value="free">自由模式 | Free Mode</option>
            </select>
            <div class="game-number-container">
                <label for="game-number">游戏编号：</label>
                <input type="number" id="game-number" min="1" value="1" class="game-number-input">
                <span class="game-number-total">/ 1</span>
            </div>
            
            <!-- 图形化状态指示器 | Graphical Status Indicators -->
            <div class="status-icons">
                <!-- 红点模式选择器 | Point Mode Selector -->
                <div class="status-item" id="point-mode-selector">
                    <div class="status-icon-container">
                        <div class="status-icon point-icon"></div>
                    </div>
                    <div class="status-value"><span id="current-points">0</span></div>
                </div>
                <!-- 剩余小棍指示器 | Remaining Sticks Indicator -->
                <div class="status-item" id="remaining-sticks-item">
                    <div class="status-icon-container">
                        <div class="progress-bar" id="remaining-sticks-bar"></div>
                    </div>
                    <div class="status-value"><span id="remaining-sticks-count">10</span></div>
                </div>
            </div>
        </div>

        <!-- ==================== 游戏面板容器 | Game Board Container ==================== -->
        <div class="game-container">
            <div class="x-axis">
                <!-- x轴标签由JS生成 | X-axis labels will be generated by JS -->
            </div>
            <div class="y-axis">
                <!-- y轴标签由JS生成 | Y-axis labels will be generated by JS -->
            </div>
            <div id="grid-container"></div>
        </div>

        <!-- ==================== 游戏规则说明 | Game Rules ==================== -->
        <div class="rules-panel">
            <h2>游戏规则 | Game Rules</h2>
            <!-- 游戏目标 | Game Objective -->
            <div class="rule-section">
                <h3>游戏目标 | Objective</h3>
                <p>使用小棍将所有红色点连接起来，形成一个连通的网络。</p>
                <p>Connect all red points to form a connected network using sticks.</p>
            </div>
            
            <!-- 难度设置 | Difficulty Settings -->
            <div class="rule-section">
                <h3>难度设置 | Difficulty Levels</h3>
                <ul>
                    <li>简易模式 | Easy: 8根小棍，预设3个红点 | 8 sticks, 3 preset points</li>
                    <li>中等模式 | Medium: 12根小棍，预设5个红点 | 12 sticks, 5 preset points</li>
                    <li>困难模式 | Hard: 35根小棍，预设12个红点 | 35 sticks, 12 preset points</li>
                    <li>自由模式 | Free Mode: 无限制小棍，可自由设置红点 | Unlimited sticks, free point placement</li>
                </ul>
            </div>
            
            <!-- 操作方法 | How to Play -->
            <div class="rule-section">
                <h3>操作方法 | How to Play</h3>
                <ol>
                    <li>选择游戏难度和关卡编号 | Select difficulty level and game number</li>
                    <li>在自由模式下：| In Free Mode:</li>
                    <ul>
                        <li>默认为红点模式，点击格点可以设置/取消红点 | Default is Point Mode, click grid points to set/unset red points</li>
                        <li>点击状态面板中的红点图标或小棍图标可以切换模式 | Click the point or stick icon in the status panel to switch modes</li>
                    </ul>
                    <li>在预设模式下（简易/中等/困难）：| In preset modes (Easy/Medium/Hard):</li>
                    <ul>
                        <li>自动加载预设红点 | Preset points are loaded automatically</li>
                        <li>固定为小棍模式 | Fixed in stick mode</li>
                    </ul>
                    <li>小棍模式操作：| In stick mode:</li>
                    <ul>
                        <li>点击一个点后，相邻的可连接点会显示浅蓝色高亮 | After clicking a point, adjacent connectable points will be highlighted in light blue</li>
                        <li>点击高亮点即可建立连接 | Click a highlighted point to create connection</li>
                        <li>点击已放置的小棍可以移除 | Click placed sticks to remove them</li>
                        <li>点击已选中的点可以取消选择 | Click selected point to deselect it</li>
                    </ul>
                </ol>
            </div>
            
            <!-- 胜利条件 | Victory Condition -->
            <div class="rule-section">
                <h3>胜利条件 | Victory Condition</h3>
                <p>当所有红色点通过小棍相互连通时获得胜利。每个红点都必须可以通过小棍到达其他任意红点。</p>
                <p>Victory is achieved when all red points are interconnected through sticks. Each red point must be able to reach any other red point through the sticks.</p>
            </div>
        </div>
    </div>

    <!-- ==================== 音效资源 | Sound Resources ==================== -->
    <!-- 胜利音效 | Victory sound effect -->
    <audio id="victory-sound" preload="auto">
        <source src="sounds/victory.mp3" type="audio/mpeg">
        <source src="sounds/victory.ogg" type="audio/ogg">
        <source src="sounds/victory.wav" type="audio/wav">
        您的浏览器不支持音频元素。 | Your browser does not support the audio element.
    </audio>
    
    <!-- ==================== 游戏数据 | Game Data ==================== -->
    <script type="text/javascript">
        // 预设游戏点位数据 | Preset game points data
        window.GAME_POINTS_DATA = {
            // 简易模式配置 | Easy mode configuration
            "easy": {
                "maxSticks": 8,
                "presets": [
                    // 关卡1 | Level 1
                    [
                        {"x": 2, "y": 2},
                        {"x": 3, "y": 5},
                        {"x": 7, "y": 2}
                    ],
                    // 关卡2 | Level 2
                    [
                        {"x": 2, "y": 2},
                        {"x": 3, "y": 5},
                        {"x": 4, "y": 8}
                    ],
                ]
            },
            // 中等模式配置 | Medium mode configuration
            "medium": {
                "maxSticks": 12,
                "presets": [
                    // 关卡1 | Level 1
                    [
                        {"x": 1, "y": 1},
                        {"x": 3, "y": 3},
                        {"x": 5, "y": 5},
                        {"x": 7, "y": 7},
                        {"x": 3, "y": 5}
                    ],
                    // 关卡2 | Level 2
                    [
                        {"x": 2, "y": 8},
                        {"x": 4, "y": 6},
                        {"x": 6, "y": 4},
                        {"x": 8, "y": 2},
                        {"x": 5, "y": 5}
                    ]
                ]
            },
            // 困难模式配置 | Hard mode configuration
            "hard": {
                "maxSticks": 35,
                "presets": [
                    // 关卡1 | Level 1
                    [
                        {"x": 1, "y": 4},
                        {"x": 1, "y": 1},
                        {"x": 2, "y": 7},
                        {"x": 4, "y": 3},
                        {"x": 5, "y": 9},
                        {"x": 5, "y": 0},
                        {"x": 6, "y": 8},
                        {"x": 7, "y": 6},
                        {"x": 8, "y": 0},
                        {"x": 9, "y": 9},
                        {"x": 10, "y": 5},
                        {"x": 10, "y": 2}
                    ]
                ]
            }
        };
    </script>
    
    <!-- 主要游戏脚本 | Main game script -->
    <script src="script.js"></script>
</body>
</html>